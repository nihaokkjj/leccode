<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>题目详情 - 乐扣</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6', // 主色调：现代蓝
                        secondary: '#10B981', // 成功绿
                        tertiary: '#6366F1', // 紫色调
                        danger: '#EF4444', // 错误红
                        warning: '#F59E0B', // 警告黄
                        light: '#F3F4F6', // 浅灰背景
                        dark: '#1F2937', // 深色文本
                        'text-primary': '#1F2937', // 主要文本色
                        'text-secondary': '#6B7280', // 次要文本色
                    },
                    boxShadow: {
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)',
                        'dropdown': '0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.01)',
                    },
                    borderRadius: {
                        'xl': '0.75rem',
                        '2xl': '1rem',
                    }
                }
            }
        }
    </script>
    <style>
        .editor-line-numbers {
            counter-reset: line;
        }
        
        .editor-line-numbers span {
            counter-increment: line;
        }
        
        .editor-line-numbers span::before {
            content: counter(line);
            display: inline-block;
            width: 2rem;
            color: #9CA3AF;
            text-align: right;
            padding-right: 0.5rem;
            user-select: none;
        }
        
        .tab-active {
            background-color: rgba(59, 130, 246, 0.1);
            color: #3B82F6;
            font-weight: 500;
        }
        
        .code-editor:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #F3F4F6;
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #D1D5DB;
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #9CA3AF;
        }
    </style>
</head>
<body class="bg-gray-50 text-text-primary font-sans min-h-screen flex flex-col">
    <!-- 顶部导航栏 -->
    <header id="main-header" class="bg-white shadow-sm sticky top-0 z-10">
        <div class="container mx-auto px-4 flex items-center justify-between h-16">
            <div id="left-section" class="flex items-center space-x-8">
                <!-- Logo -->
                <a href="P-HOME.html" id="logo-link" class="flex items-center space-x-2">
                    <div id="logo" class="text-primary text-2xl font-bold">乐扣</div>
                </a>
                
                <!-- 主导航菜单 -->
                <nav id="main-nav" class="hidden md:flex items-center space-x-8">
                    <a href="P-HOME.html" id="nav-home" class="text-text-secondary hover:text-primary py-1">首页</a>
                    <a href="P-PROBLEM_LIST.html" id="nav-problem-list" class="text-primary font-medium border-b-2 border-primary py-1">题库</a>
                    <a href="P-CONTEST_LIST.html" id="nav-contest-list" class="text-text-secondary hover:text-primary py-1">比赛</a>
                    <a href="P-PLAYLIST_LIST.html" id="nav-playlist-list" class="text-text-secondary hover:text-primary py-1">题单</a>
                </nav>
            </div>
            
            <div id="right-section" class="flex items-center space-x-4">
                <!-- 搜索框 -->
                <div id="search-container" class="relative hidden md:block">
                    <input id="search-input" type="text" placeholder="搜索题目" class="bg-gray-50 rounded-lg py-2 pl-10 pr-4 w-64 text-sm border border-gray-200 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary">
                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
                
                <!-- 用户头像 -->
                <div id="user-profile" class="relative">
                    <button id="user-menu-button" class="flex items-center space-x-2 focus:outline-none">
                        <img id="user-avatar" src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" alt="用户头像" class="w-8 h-8 rounded-full object-cover">
                        <span id="user-name" class="text-sm hidden md:inline">程序员小明</span>
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- 主内容区 -->
    <main id="main-content" class="flex-1 container mx-auto px-4 py-6 flex">
        <!-- 左侧菜单 - 可折叠 -->
        <aside id="side-menu" class="hidden md:block w-48 lg:w-56 flex-shrink-0 pr-4">
            <div id="side-menu-container" class="bg-white rounded-xl shadow-card p-4">
                <div id="menu-header" class="pb-3 border-b border-gray-100">
                    <h3 class="text-sm font-medium text-text-secondary">功能导航</h3>
                </div>
                
                <nav id="side-nav" class="mt-4 space-y-1">
                    <a href="P-PROBLEM_LIST.html" id="side-nav-problem-list" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-primary bg-blue-50">
                        <i class="fas fa-list-ul w-5 text-center"></i>
                        <span>题目列表</span>
                    </a>
                    <a href="P-PLAYLIST_LIST.html" id="side-nav-playlist-list" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-text-secondary hover:bg-gray-50">
                        <i class="fas fa-layer-group w-5 text-center"></i>
                        <span>我的题单</span>
                    </a>
                    <a href="P-CONTEST_LIST.html" id="side-nav-contest-list" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-text-secondary hover:bg-gray-50">
                        <i class="fas fa-trophy w-5 text-center"></i>
                        <span>比赛</span>
                    </a>
                    <a href="P-PROFILE.html" id="side-nav-profile" class="flex items-center space-x-3 px-3 py-2 rounded-lg text-text-secondary hover:bg-gray-50">
                        <i class="fas fa-user w-5 text-center"></i>
                        <span>个人中心</span>
                    </a>
                </nav>
                
                <div id="menu-stats" class="mt-6 pt-4 border-t border-gray-100">
                    <div class="text-sm text-text-secondary mb-2">我的统计</div>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="bg-gray-50 rounded-lg p-2 text-center">
                            <div class="text-lg font-semibold text-primary">42</div>
                            <div class="text-xs text-text-secondary">已解题</div>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-2 text-center">
                            <div class="text-lg font-semibold text-tertiary">128</div>
                            <div class="text-xs text-text-secondary">总提交</div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
        
        <!-- 主内容区 - 左右分栏 -->
        <div id="content-container" class="flex-1 flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
            <!-- 左侧题目详情区域 -->
            <div id="problem-detail" class="md:w-5/12 lg:w-2/5 bg-white rounded-xl shadow-card p-6 overflow-hidden flex flex-col">
                <!-- 面包屑导航 -->
                <div id="breadcrumb" class="text-sm text-text-secondary mb-4">
                    <a href="P-HOME.html" id="breadcrumb-home" class="hover:text-primary">首页</a> &gt; 
                    <a href="P-PROBLEM_LIST.html" id="breadcrumb-problem-list" class="hover:text-primary">题库</a> &gt; 
                    <span id="breadcrumb-current">二分查找</span>
                </div>
                
                <!-- 题目标题 -->
                <div id="problem-header" class="mb-6">
                    <h1 id="problem-title" class="text-xl font-bold">二分查找</h1>
                    <div id="problem-tags" class="flex flex-wrap gap-2 mt-2">
                        <span class="text-xs px-2 py-1 bg-blue-50 text-primary rounded-full">算法</span>
                        <span class="text-xs px-2 py-1 bg-green-50 text-secondary rounded-full">数组</span>
                        <span class="text-xs px-2 py-1 bg-purple-50 text-tertiary rounded-full">二分法</span>
                        <span class="text-xs px-2 py-1 bg-yellow-50 text-warning rounded-full">中等</span>
                    </div>
                    <div id="problem-stats" class="flex items-center space-x-4 mt-3 text-sm text-text-secondary">
                        <div id="submission-count" class="flex items-center">
                            <i class="fas fa-code mr-1"></i>
                            <span>提交次数: 1,248</span>
                        </div>
                        <div id="pass-rate" class="flex items-center">
                            <i class="fas fa-check-circle mr-1"></i>
                            <span>通过率: 65.2%</span>
                        </div>
                    </div>
                </div>
                
                <!-- 题目描述 -->
                <div id="problem-description" class="flex-1 overflow-y-auto custom-scrollbar">
                    <div class="prose">
                        <p class="mb-4">给定一个 <strong>n</strong> 个元素有序的（升序）整型数组 <code>nums</code> 和一个目标值 <code>target</code> ，写一个函数搜索 <code>nums</code> 中的 <code>target</code>，如果目标值存在返回下标，否则返回 <code>-1</code>。</p>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">示例 1:</h3>
                        <pre class="bg-gray-50 p-3 rounded-lg mb-4 text-sm"><code>输入: nums = [-1,0,3,5,9,12], target = 9
输出: 4
解释: 9 出现在 nums 中并且下标为 4</code></pre>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">示例 2:</h3>
                        <pre class="bg-gray-50 p-3 rounded-lg mb-4 text-sm"><code>输入: nums = [-1,0,3,5,9,12], target = 2
输出: -1
解释: 2 不存在 nums 中因此返回 -1</code></pre>
                        
                        <h3 class="text-lg font-semibold mt-6 mb-2">提示:</h3>
                        <ul class="list-disc pl-5 mb-4">
                            <li>你可以假设 <code>nums</code> 中的所有元素是不重复的。</li>
                            <li><code>n</code> 将在 <code>[1, 10000]</code>之间。</li>
                            <li><code>nums</code> 的每个元素都将在 <code>[-9999, 9999]</code>之间。</li>
                        </ul>
                    </div>
                </div>
                
                <!-- 底部操作区 -->
                <div id="problem-actions" class="flex items-center justify-between mt-6 pt-4 border-t border-gray-100">
                    <div id="problem-nav" class="flex space-x-2">
                        <a href="#" id="prev-problem" class="text-sm text-text-secondary hover:text-primary flex items-center">
                            <i class="fas fa-arrow-left mr-1"></i> 上一题
                        </a>
                        <a href="#" id="next-problem" class="text-sm text-text-secondary hover:text-primary flex items-center">
                            下一题 <i class="fas fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                    <div id="problem-tools" class="flex space-x-2">
                        <button id="btn-collect" class="text-text-secondary hover:text-primary p-2 rounded-full hover:bg-gray-50">
                            <i class="far fa-star"></i>
                        </button>
                        <button id="btn-add-to-playlist" class="text-text-secondary hover:text-primary p-2 rounded-full hover:bg-gray-50">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 右侧编程区域 -->
            <div id="coding-area" class="md:w-7/12 lg:w-3/5 bg-white rounded-xl shadow-card overflow-hidden flex flex-col">
                <!-- 编程工具栏 -->
                <div id="coding-toolbar" class="bg-gray-50 p-3 border-b border-gray-200 flex items-center justify-between">
                    <div id="language-selector" class="flex items-center">
                        <select id="code-language" class="bg-white border border-gray-200 rounded-lg py-1.5 px-3 text-sm focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary">
                            <option value="cpp">C++</option>
                            <option value="java">Java</option>
                            <option value="python">Python</option>
                            <option value="javascript">JavaScript</option>
                            <option value="go">Go</option>
                            <option value="rust">Rust</option>
                            <option value="php">PHP</option>
                            <option value="swift">Swift</option>
                            <option value="kotlin">Kotlin</option>
                            <option value="cangjie">Cangjie</option>
                            <option value="typescript">TypeScript</option>
                        </select>
                    </div>
                    <div id="editor-tools" class="flex items-center space-x-2">
                        <button id="btn-theme" class="text-text-secondary hover:text-primary p-1.5 rounded hover:bg-white">
                            <i class="fas fa-adjust"></i>
                        </button>
                        <button id="btn-format" class="text-text-secondary hover:text-primary p-1.5 rounded hover:bg-white">
                            <i class="fas fa-align-left"></i>
                        </button>
                        <button id="btn-settings" class="text-text-secondary hover:text-primary p-1.5 rounded hover:bg-white">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>
                
                <!-- 代码编辑器 -->
                <div id="editor-container" class="flex-1 flex overflow-hidden">
                    <!-- 行号 -->
                    <div id="line-numbers" class="editor-line-numbers bg-gray-50 py-3 text-xs text-right font-mono select-none">
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                        <span></span><br>
                    </div>
                    
                    <!-- 代码区域 -->
                    <div id="code-content" class="flex-1 overflow-auto custom-scrollbar">
                        <pre id="editor" class="p-3 font-mono text-sm"><code class="language-cpp">class Solution {
public:
    int search(vector<int>& nums, int target) {
        int left = 0;
        int right = nums.size() - 1;
        
        while (left <= right) {
            int mid = left + (right - left) / 2;
            
            if (nums[mid] == target) {
                return mid;
            } else if (nums[mid] < target) {
                left = mid + 1;
            } else {
                right = mid - 1;
            }
        }
        
        return -1;
    }
};</code></pre>
                    </div>
                </div>
                
                <!-- 测试用例与提交区域 -->
                <div id="test-submit-area" class="border-t border-gray-200">
                    <!-- 测试用例标签页 -->
                    <div id="test-tabs" class="flex border-b border-gray-200">
                        <button id="tab-testcase" class="flex-1 py-3 px-4 text-center tab-active">
                            测试用例
                        </button>
                        <button id="tab-results" class="flex-1 py-3 px-4 text-center text-text-secondary hover:text-primary">
                            运行结果
                        </button>
                    </div>
                    
                    <!-- 测试用例内容 -->
                    <div id="test-content" class="p-4">
                        <div id="testcase-input" class="mb-4">
                            <label for="testcase-input-text" class="block text-sm font-medium text-text-secondary mb-1">输入:</label>
                            <textarea id="testcase-input-text" rows="2" class="w-full p-2 border border-gray-200 rounded-lg text-sm font-mono focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary">[-1,0,3,5,9,12]
9</textarea>
                        </div>
                        
                        <div id="testcase-expected" class="mb-4">
                            <label for="testcase-expected-text" class="block text-sm font-medium text-text-secondary mb-1">预期输出:</label>
                            <input id="testcase-expected-text" type="text" value="4" class="w-full p-2 border border-gray-200 rounded-lg text-sm font-mono focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary">
                        </div>
                        
                        <div id="testcase-actions" class="flex justify-between">
                            <div class="flex space-x-2">
                                <button id="btn-add-testcase" class="text-sm text-primary bg-white border border-primary rounded-lg px-3 py-1.5 hover:bg-blue-50">
                                    <i class="fas fa-plus mr-1"></i> 添加用例
                                </button>
                                <button id="btn-clear" class="text-sm text-text-secondary bg-white border border-gray-200 rounded-lg px-3 py-1.5 hover:bg-gray-50">
                                    清空
                                </button>
                            </div>
                            <div class="flex space-x-2">
                                <button id="btn-run" class="text-sm text-white bg-secondary rounded-lg px-4 py-1.5 hover:bg-green-600">
                                    <i class="fas fa-play mr-1"></i> 运行
                                </button>
                                <button id="btn-submit" class="text-sm text-white bg-primary rounded-lg px-4 py-1.5 hover:bg-blue-600">
                                    <i class="fas fa-paper-plane mr-1"></i> 提交
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 运行结果内容 (默认隐藏) -->
                    <div id="results-content" class="p-4 hidden">
                        <div id="result-status" class="mb-4 p-3 bg-green-50 text-secondary rounded-lg">
                            <div class="font-medium">通过</div>
                            <div class="text-sm mt-1">执行用时: 8 ms, 内存消耗: 11.2 MB</div>
                        </div>
                        
                        <div id="result-output" class="mb-4">
                            <div class="text-sm font-medium text-text-secondary mb-1">输出:</div>
                            <div class="p-2 bg-gray-50 rounded-lg text-sm font-mono">4</div>
                        </div>
                        
                        <div id="result-expected" class="mb-4">
                            <div class="text-sm font-medium text-text-secondary mb-1">预期输出:</div>
                            <div class="p-2 bg-gray-50 rounded-lg text-sm font-mono">4</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- 页脚 -->
    <footer id="main-footer" class="bg-white border-t border-gray-200 py-4 mt-8">
        <div class="container mx-auto px-4 text-center text-sm text-text-secondary">
            <p>© 2023 乐扣 Online Judge 平台 | 一款面向学生科技工作室成员及大学计算机专业学生的编程学习工具</p>
        </div>
    </footer>

    <!-- 添加到题单模态框 (默认隐藏) -->
    <div id="add-to-playlist-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-md">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">添加到题单</h3>
                <button id="close-playlist-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="max-h-60 overflow-y-auto custom-scrollbar mb-4">
                <div id="playlist-list" class="space-y-2">
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded-lg">
                        <input type="checkbox" id="playlist-1" class="mr-3">
                        <label for="playlist-1" class="flex-1 cursor-pointer">算法基础训练</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded-lg">
                        <input type="checkbox" id="playlist-2" class="mr-3">
                        <label for="playlist-2" class="flex-1 cursor-pointer">二分查找专题</label>
                    </div>
                    <div class="flex items-center p-2 hover:bg-gray-50 rounded-lg">
                        <input type="checkbox" id="playlist-3" class="mr-3">
                        <label for="playlist-3" class="flex-1 cursor-pointer">中等难度题集</label>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-end space-x-2">
                <button id="create-new-playlist" class="text-sm text-primary bg-white border border-primary rounded-lg px-3 py-1.5 hover:bg-blue-50">
                    创建新题单
                </button>
                <button id="confirm-add-to-playlist" class="text-sm text-white bg-primary rounded-lg px-4 py-1.5 hover:bg-blue-600">
                    确认添加
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取URL参数
            function getUrlParams() {
                const params = {};
                const queryString = window.location.search.substring(1);
                const urlParams = new URLSearchParams(queryString);
                
                for(const [key, value] of urlParams.entries()) {
                    params[key] = value;
                }
                return params;
            }
            
            // 获取URL参数
            const params = getUrlParams();
            
            // 如果有题目ID参数，加载题目详情
            if(params.problemId) {
                loadProblemDetails(params.problemId);
            }
            
            // 加载题目详情的函数
            function loadProblemDetails(problemId) {
                // 在实际应用中，这里会调用API获取数据
                // 但在这个示例中，我们模拟数据加载
                const mockProblems = {
                    "problem1": { 
                        title: "二分查找", 
                        difficulty: "中等",
                        tags: ["算法", "数组", "二分法"],
                        submissionCount: 1248,
                        passRate: "65.2%",
                        description: "给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。",
                        examples: [
                            {
                                input: "[-1,0,3,5,9,12]\n9",
                                output: "4",
                                explanation: "9 出现在 nums 中并且下标为 4"
                            },
                            {
                                input: "[-1,0,3,5,9,12]\n2",
                                output: "-1",
                                explanation: "2 不存在 nums 中因此返回 -1"
                            }
                        ],
                        hints: [
                            "你可以假设 nums 中的所有元素是不重复的。",
                            "n 将在 [1, 10000]之间。",
                            "nums 的每个元素都将在 [-9999, 9999]之间。"
                        ]
                    }
                };
                
                const problem = mockProblems[problemId] || mockProblems["problem1"];
                
                // 更新页面UI
                document.querySelector('#problem-title').textContent = problem.title;
                document.querySelector('#breadcrumb-current').textContent = problem.title;
                
                // 其他UI更新...
            }
            
            // 导航菜单点击事件
            document.querySelector('#nav-home').addEventListener('click', function(e) {
                window.location.href = 'P-HOME.html';
            });
            
            document.querySelector('#nav-problem-list').addEventListener('click', function(e) {
                window.location.href = 'P-PROBLEM_LIST.html';
            });
            
            document.querySelector('#nav-contest-list').addEventListener('click', function(e) {
                window.location.href = 'P-CONTEST_LIST.html';
            });
            
            document.querySelector('#nav-playlist-list').addEventListener('click', function(e) {
                window.location.href = 'P-PLAYLIST_LIST.html';
            });
            
            // 侧边菜单点击事件
            document.querySelector('#side-nav-problem-list').addEventListener('click', function(e) {
                window.location.href = 'P-PROBLEM_LIST.html';
            });
            
            document.querySelector('#side-nav-playlist-list').addEventListener('click', function(e) {
                window.location.href = 'P-PLAYLIST_LIST.html';
            });
            
            document.querySelector('#side-nav-contest-list').addEventListener('click', function(e) {
                window.location.href = 'P-CONTEST_LIST.html';
            });
            
            document.querySelector('#side-nav-profile').addEventListener('click', function(e) {
                window.location.href = 'P-PROFILE.html';
            });
            
            // 面包屑导航点击事件
            document.querySelector('#breadcrumb-home').addEventListener('click', function(e) {
                window.location.href = 'P-HOME.html';
            });
            
            document.querySelector('#breadcrumb-problem-list').addEventListener('click', function(e) {
                window.location.href = 'P-PROBLEM_LIST.html';
            });
            
            // 上一题/下一题点击事件
            document.querySelector('#prev-problem').addEventListener('click', function(e) {
                e.preventDefault();
                // 在实际应用中，这里会跳转到上一题
                console.log('跳转到上一题');
            });
            
            document.querySelector('#next-problem').addEventListener('click', function(e) {
                e.preventDefault();
                // 在实际应用中，这里会跳转到下一题
                console.log('跳转到下一题');
            });
            
            // 收藏按钮点击事件
            document.querySelector('#btn-collect').addEventListener('click', function() {
                const icon = this.querySelector('i');
                if (icon.classList.contains('far')) {
                    icon.classList.remove('far');
                    icon.classList.add('fas');
                    icon.classList.add('text-warning');
                } else {
                    icon.classList.remove('fas');
                    icon.classList.remove('text-warning');
                    icon.classList.add('far');
                }
            });
            
            // 添加到题单按钮点击事件
            document.querySelector('#btn-add-to-playlist').addEventListener('click', function() {
                document.querySelector('#add-to-playlist-modal').classList.remove('hidden');
            });
            
            // 关闭题单模态框
            document.querySelector('#close-playlist-modal').addEventListener('click', function() {
                document.querySelector('#add-to-playlist-modal').classList.add('hidden');
            });
            
            // 确认添加到题单
            document.querySelector('#confirm-add-to-playlist').addEventListener('click', function() {
                document.querySelector('#add-to-playlist-modal').classList.add('hidden');
                // 在实际应用中，这里会处理添加到题单的逻辑
                console.log('题目已添加到选中的题单');
            });
            
            // 创建新题单
            document.querySelector('#create-new-playlist').addEventListener('click', function() {
                // 在实际应用中，这里会跳转到创建题单页面或打开创建题单模态框
                window.location.href = 'P-PLAYLIST_LIST.html';
            });
            
            // 测试用例标签页切换
            document.querySelector('#tab-testcase').addEventListener('click', function() {
                this.classList.add('tab-active');
                document.querySelector('#tab-results').classList.remove('tab-active');
                document.querySelector('#test-content').classList.remove('hidden');
                document.querySelector('#results-content').classList.add('hidden');
            });
            
            document.querySelector('#tab-results').addEventListener('click', function() {
                this.classList.add('tab-active');
                document.querySelector('#tab-testcase').classList.remove('tab-active');
                document.querySelector('#test-content').classList.add('hidden');
                document.querySelector('#results-content').classList.remove('hidden');
            });
            
            // 运行代码
            document.querySelector('#btn-run').addEventListener('click', function() {
                // 在实际应用中，这里会发送代码到后端运行
                document.querySelector('#tab-results').click();
            });
            
            // 提交代码
            document.querySelector('#btn-submit').addEventListener('click', function() {
                // 在实际应用中，这里会发送代码到后端判题
                const code = document.querySelector('#editor').textContent;
                const language = document.querySelector('#code-language').value;
                
                console.log('提交代码:', {
                    code: code,
                    language: language
                });
                
                // 模拟判题结果
                document.querySelector('#tab-results').click();
            });
            
            // 添加测试用例
            document.querySelector('#btn-add-testcase').addEventListener('click', function() {
                // 在实际应用中，这里会添加新的测试用例输入框
                console.log('添加新测试用例');
            });
            
            // 清空测试用例
            document.querySelector('#btn-clear').addEventListener('click', function() {
                document.querySelector('#testcase-input-text').value = '';
                document.querySelector('#testcase-expected-text').value = '';
            });
            
            // 代码编辑器工具栏功能
            document.querySelector('#btn-theme').addEventListener('click', function() {
                // 在实际应用中，这里会切换编辑器主题
                console.log('切换编辑器主题');
            });
            
            document.querySelector('#btn-format').addEventListener('click', function() {
                // 在实际应用中，这里会格式化代码
                console.log('格式化代码');
            });
            
            document.querySelector('#btn-settings').addEventListener('click', function() {
                // 在实际应用中，这里会打开编辑器设置
                console.log('打开编辑器设置');
            });
            
            // 用户菜单点击事件
            document.querySelector('#user-menu-button').addEventListener('click', function() {
                window.location.href = 'P-PROFILE.html';
            });
            
            // 搜索框功能
            document.querySelector('#search-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const keyword = this.value.trim();
                    if (keyword) {
                        window.location.href = `P-PROBLEM_LIST.html?keyword=${encodeURIComponent(keyword)}`;
                    }
                }
            });
        });
    </script>
</body>
</html>